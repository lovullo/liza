_format_version: "1.1"
_info:
  select_tags:
    - dullahan
upstreams:
  - name: 'dullahan.service'
    algorithm: 'round-robin'
    targets:
      - { target: 't-dc02quote01.rsgcorp.local:6047', weight: 50 }
      - { target: 't-dc02quote02.rsgcorp.local:6047', weight: 50 }
    healthchecks:
      active:
        https_verify_certificate: false
        unhealthy:
          http_statuses: [429, 404, 500, 501, 502, 503, 504, 505]
          tcp_failures: 1
          timeouts: 1
          http_failures: 1
          interval: 10
        healthy:
          http_statuses: [200, 204, 302]
          interval: 120
          successes: 1
        https_sni: 'test.dullahan.api.ryansg.dev'
        http_path: '/healthcheck'
        timeout: 1
        concurrency: 1
        type: 'http'
      passive:
        unhealthy:
          http_failures: 5
          http_statuses: [429, 500, 503]
          tcp_failures: 5
          timeouts: 5
        healthy:
          successes: 1
          http_statuses: [200, 201, 202, 203, 204, 205, 206, 207, 208, 226, 300, 301, 302, 303, 304, 305, 306, 307, 308]
services:
  - name: dullahan
    host: 'dullahan.service'
    routes:
      - name: dullahan-root
        hosts:
          - 'test.dullahan.api.ryansg.dev'
        strip_path: true
        path_handling: v0
        paths:
          - /
