@c  This document is part of the Liza Data Collection Framework manual.
@c  Copyright (C) 2017 LoVullo Associates, Inc.
@c
@c    Permission is granted to copy, distribute and/or modify this document
@c    under the terms of the GNU Free Documentation License, Version 1.3
@c    or any later version published by the Free Software Foundation;
@c    with no Invariant Sections, no Front-Cover Texts, and no Back-Cover
@c    Texts.  A copy of the license is included in the section entitled ``GNU
@c    Free Documentation License''.


@c unicode CONSTRUCTION SIGN
@macro constructionsign
ðŸš§
@end macro


@c insert appropriate em dash for mode
@ifnottex
@macro mdash
@inlinefmtifelse{html, @inlineraw{html,&mdash;}, â€”}
@end macro
@end ifnottex

@c the macro for TeX for some reason always seems to be followed
@c by a space when applied; #1 consumes it and re-adds if it's
@c not empty
@tex
\gdef\mdash#1{%
  ---%
  \def\next{#1}%
  \ifx\next\empty\relax\else#1\fi%
}
@end tex


@c inline documentation notice for some sort of quality
@c improvement or warning
@macro noticestart{type}
@html
<div class="doc-notice \type\">
@end html
@end macro

@macro noticeend{}
@html
</div>
@end html
@end macro


@c vanilla notice
@macro notice{text}
@noticestart{}
@emph{\text\}
@noticeend
@end macro


@c notice for developers of liza
@macro devnotice{text}
@ifset DEVNOTES
  @noticestart{dev}
  @emph{\text\}
  @noticeend
@end ifset
@end macro


@c indicate that help is needed to produce docs
@macro helpwanted{}
@cindex TODO, Missing Docs
@dnindex Missing Docs
@notice{There's nothing here yet.  Maybe you can help?}
@end macro


@c maintenance note for developers
@macro maintenance{desc}
@dnindex Maintenance Concern
@devnotice{This system has maintenance concerns.@footnote{
  @maintfoot{\desc\}
}}
@end macro

@c encapsulated to avoid bad TeX generation (fails compilation
@c when inlined at call site)
@macro maintfoot{desc}
  @html
  <div class="footnote-notice dev">
  @end html
  \desc\

  @emph{Developers should evaluate whether extra time should be
          allocated for tasks involving this system.}
  @html
  </div>
  @end html
@end macro


@c simple textual example
@macro exnotice{text}
@noticestart{ex}
@strong{Example:} \text\
@noticeend
@end macro


@c needs to be moved into liza
@macro mvnotice{text}
@noticestart{mv}
All or part of this system needs to be moved into Liza.@footnote{
  \text\}
@noticeend
@end macro


@c link to source file if URI is known, otherwise display
@c the path to the file
@ifset SRCURI
@macro srcref{path, display}
@url{@value{SRCURI}/\path\, @code{\display\}}
@end macro
@end ifset

@ifclear SRCURI
@macro srcref{path, display}
@file{\path\}
@end macro
@end ifclear
